{"componentChunkName":"component---node-modules-pauliescanlon-gatsby-theme-terminal-src-layouts-source-layout-js","path":"/posts/2020/parsewechatrecord/","result":{"data":{"mdx":{"id":"5c663569-c32f-57d3-8176-07fafbde6b1d","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"微信聊天记录db解析 - parse wechat records.\",\n  \"tags\": [\"hack\", \"db\"],\n  \"featuredImage\": \"florian-olivo-Ek9Znm8lQ1U-unsplash.jpg\",\n  \"date\": \"2020-12-9\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"macOS \\u5FAE\\u4FE1\\u7684\\u201C\\u5907\\u4EFD\\u4E0E\\u6062\\u590D\\u201D\\u529F\\u80FD\\u53EA\\u80FD\\u4ECE\\u624B\\u673A\\u5FAE\\u4FE1\\u5BFC\\u51FA\\u5230 Mac, \\u4F46\\u662F\\u5FAE\\u4FE1\\u5176\\u5B9E\\u53C8\\u5728\\u672C\\u5730\\u5B58\\u4E86\\u52A0\\u5BC6\\u7684 sqlite3 \\u6570\\u636E\\u5E93\\uFF1B \\u672C\\u5730\\u6570\\u636E\\u5E93\\u7684\\u662F\\u4E00\\u7CFB\\u5217 *.db \\u6587\\u4EF6\\uFF0C\\u53EF\\u4EE5\\u7528\\u5982\\u4E0B\\u547D\\u4EE4\\u67E5\\u770B\\uFF0C\"), mdx(\"p\", null, \"ls -alh ~/Library/Containers/com.tencent.xinWeChat/Data/Library/Application\\\\ Support/com.tencent.xinWeChat/\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"/\"), \"/Message/*.db\"), mdx(\"p\", null, \"\\u7ECF\\u8FC7\\u89C2\\u5BDF\\uFF0C\\u5FAE\\u4FE1\\u5B58\\u6570\\u636E\\u4F7F\\u7528\\u7684\\u662F\\u5F00\\u6E90\\u7684 sqlcipher, \\u6240\\u4EE5\\u8FD8\\u662F\\u6709\\u529E\\u6CD5\\u5BFC\\u51FA\\u5FAE\\u4FE1\\u5728 Mac \\u672C\\u673A\\u7684\\u6570\\u636E\\u5E93\\u7684\\uFF0C \\u4EE5\\u4E0B\\u5185\\u5BB9\\u5728 macOS 10.12, MAS \\u7248\\u5FAE\\u4FE1 2.3.16 \\u6D4B\\u8BD5\\u751F\\u6548\\uFF1B\"), mdx(\"p\", null, \"\\u8BE5\\u65B9\\u6CD5\\u4F9D\\u8D56 lldb\\uFF0C \\u6B65\\u9AA4\\u5982\\u4E0B\"), mdx(\"p\", null, \"\\u6253\\u5F00\\u5FAE\\u4FE1\"), mdx(\"p\", null, \"\\u547D\\u4EE4\\u884C\\u8FD0\\u884C lldb -p $(pgrep WeChat)\"), mdx(\"p\", null, \"\\u5728 lldb \\u4E2D\\u8F93\\u5165 br set -n sqlite3_key\\uFF0C \\u56DE\\u8F66\"), mdx(\"p\", null, \"\\u8FD8\\u662F\\u5728 lldb \\u4E2D\\uFF0C\\u8F93\\u5165 c, \\u56DE\\u8F66\"), mdx(\"p\", null, \"\\u626B\\u7801\\u767B\\u5F55\\u5FAE\\u4FE1\"), mdx(\"p\", null, \"\\u8FD9\\u65F6\\u5019\\u56DE\\u5230 lldb \\u754C\\u9762, \\u8F93\\u5165 memory read --size 1 --format x --count 32 $rsi, \\u56DE\\u8F66\"), mdx(\"p\", null, \"\\u5E94\\u8BE5\\u4F1A\\u8F93\\u51FA\\u7C7B\\u4F3C\\u4E8E\\u5982\\u4E0B\\u7684\\u6570\\u636E\"), mdx(\"p\", null, \"0x000000000000: 0xab 0xcd 0xef 0xab 0xcd 0xef 0xab 0xcd\\n0x000000000008: 0xab 0xcd 0xef 0xab 0xcd 0xef 0xab 0xcd\\n0x000000000010: 0xab 0xcd 0xef 0xab 0xcd 0xef 0xab 0xcd\\n0x000000000018: 0xab 0xcd 0xef 0xab 0xcd 0xef 0xab 0xcd\\n\\u73B0\\u5728\\uFF0C\\u5FFD\\u7565\\u5DE6\\u8FB9\\u7684\\u5730\\u5740\\uFF08 0x000000000000: \\uFF0C0x000000000008:\\uFF09\\uFF0C\\u4ECE\\u5DE6\\u5230\\u53F3\\uFF0C\\u4ECE\\u4E0A\\u5230\\u4E0B\\uFF0C\\u628A\\u5F62\\u5982 0xab 0xcd \\u7684\\u6570\\u636E\\u62FC\\u8D77\\u6765\\uFF0C\\u7136\\u540E\\u53BB\\u6389\\u6240\\u6709\\u7684 \\\"0x\\\"\\u548C\\u7A7A\\u683C\\u3001\\u6362\\u884C, \\u5F97\\u5230 64 \\u4E2A\\u5B57\\u7B26\\u7684\\u5B57\\u7B26\\u4E32\\uFF0C\\u8FD9\\u5C31\\u662F \\u5FAE\\u4FE1\\u6570\\u636E\\u5E93\\u7684 key \\uFF1B\\uFF08\\u53C2\\u8003 \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/sqlcipher/sqlcipher\"\n  }), \"https://github.com/sqlcipher/sqlcipher\"), \" \\uFF09\"), mdx(\"p\", null, \"\\u7136\\u540E, \\u53EF\\u4EE5\\u4E0B\\u4E00\\u4E2A \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://sqlitebrowser.org/\"\n  }), \"https://sqlitebrowser.org/\"), \" \\uFF0C\\u7528\\u6765\\u6D4F\\u89C8\\u4E4B\\u524D\\u63D0\\u5230\\u7684*.db \\u6587\\u4EF6\\uFF08\\u6BCF\\u4E2A db \\u90FD\\u4F7F\\u7528\\u7684\\u76F8\\u540C\\u7684 key \\uFF09,\\u6CE8\\u610F\\uFF1A\\u6253\\u5F00\\u6570\\u636E\\u5E93\\u7684\\u65F6\\u5019\\u9009\\u62E9(raw key), \\u7136\\u540E\\u8F93\\u5165 0x,\\u518D\\u8F93\\u5165\\u521A\\u624D\\u90A3 64 \\u4E2A\\u5B57\\u7B26;\"), mdx(\"p\", null, \"\\u9057\\u7559\\u95EE\\u9898\\uFF1A*.db \\u6587\\u4EF6\\u8981\\u5728\\u53E6\\u4E00\\u53F0 PC \\u6216 Mac \\u4E0A \\u767B\\u5F55\\u5FAE\\u4FE1\\uFF0C \\u624D\\u80FD\\u88AB\\u5173\\u95ED\\uFF0C\\u5426\\u5219\\u91CC\\u9762\\u7684\\u804A\\u5929\\u8BB0\\u5F55\\u4E0D\\u662F\\u6700\\u65B0\\u7684\\uFF1B\\u5F53\\u7136\\u4E5F\\u53EF\\u4EE5\\u5F3A\\u5236\\u8C03\\u7528 wal_checkpoint, \\u4E0D\\u8FC7\\u4F5C\\u4E3A\\u571F\\u529E\\u6CD5\\uFF0C\\u5728\\u53E6\\u4E00\\u53F0\\u7535\\u8111\\u4E0A\\u767B\\u4E00\\u4E0B\\u5FAE\\u4FE1\\u4E5F\\u65E0\\u59A8\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://xferris.cn/dao-chu-wei-xin-bei-fen-de-mac/\"\n  }), \"http://xferris.cn/dao-chu-wei-xin-bei-fen-de-mac/\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"macOS 微信的“备份与恢复”功能只能从手机微信导出到 Mac, 但是微信其实又在本地存了加密的 sqlite3 数据库； 本地数据库的是一系列 *.db 文件，可以用如下命令查看， ls -alh ~/Library/Containers/com.tencent…","timeToRead":1,"wordCount":{"words":174},"frontmatter":{"title":"微信聊天记录db解析 - parse wechat records.","tags":["hack","db"],"date":"2020-12-9","dateModified":null,"author":null,"status":null,"isPrivate":null,"featuredImage":{"childImageSharp":{"original":{"width":6000,"height":4000,"src":"/static/florian-olivo-Ek9Znm8lQ1U-unsplash-d64e5ffadb55eaf7df7c55dbd707086d.jpg"},"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHnLokjEYK//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEQMf/aAAgBAQABBQLahz//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEZ/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BSf/EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAQADAQEAAAAAAAAAAAAAAAEAESEQMf/aAAgBAQABPyEsYRHlacnqJs//2gAMAwEAAgADAAAAEKMv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxAP/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/EAMn/8QAGRABAAMBAQAAAAAAAAAAAAAAAQARMSFR/9oACAEBAAE/ED2Am+QesbuC1oNuUeAIUf/Z","aspectRatio":1.5,"src":"/static/d64e5ffadb55eaf7df7c55dbd707086d/a6c62/florian-olivo-Ek9Znm8lQ1U-unsplash.jpg","srcSet":"/static/d64e5ffadb55eaf7df7c55dbd707086d/b3cab/florian-olivo-Ek9Znm8lQ1U-unsplash.jpg 300w,\n/static/d64e5ffadb55eaf7df7c55dbd707086d/39f27/florian-olivo-Ek9Znm8lQ1U-unsplash.jpg 600w,\n/static/d64e5ffadb55eaf7df7c55dbd707086d/a6c62/florian-olivo-Ek9Znm8lQ1U-unsplash.jpg 1200w,\n/static/d64e5ffadb55eaf7df7c55dbd707086d/8d3de/florian-olivo-Ek9Znm8lQ1U-unsplash.jpg 1800w,\n/static/d64e5ffadb55eaf7df7c55dbd707086d/f0a07/florian-olivo-Ek9Znm8lQ1U-unsplash.jpg 2400w,\n/static/d64e5ffadb55eaf7df7c55dbd707086d/30a63/florian-olivo-Ek9Znm8lQ1U-unsplash.jpg 6000w","sizes":"(max-width: 1200px) 100vw, 1200px"},"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHnLokjEYK//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEQMf/aAAgBAQABBQLahz//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEZ/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BSf/EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAQADAQEAAAAAAAAAAAAAAAEAESEQMf/aAAgBAQABPyEsYRHlacnqJs//2gAMAwEAAgADAAAAEKMv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxAP/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/EAMn/8QAGRABAAMBAQAAAAAAAAAAAAAAAQARMSFR/9oACAEBAAE/ED2Am+QesbuC1oNuUeAIUf/Z","width":400,"height":267,"src":"/static/d64e5ffadb55eaf7df7c55dbd707086d/64b17/florian-olivo-Ek9Znm8lQ1U-unsplash.jpg","srcSet":"/static/d64e5ffadb55eaf7df7c55dbd707086d/64b17/florian-olivo-Ek9Znm8lQ1U-unsplash.jpg 1x,\n/static/d64e5ffadb55eaf7df7c55dbd707086d/39f27/florian-olivo-Ek9Znm8lQ1U-unsplash.jpg 1.5x,\n/static/d64e5ffadb55eaf7df7c55dbd707086d/a1eb1/florian-olivo-Ek9Znm8lQ1U-unsplash.jpg 2x"},"id":"dea330a1-bbac-5fd1-b357-b24f12429d3b"}},"embeddedImages":null},"fields":{"slug":"/posts/2020/parsewechatrecord/","owner":"source","parent":"posts"}}},"pageContext":{"id":"5c663569-c32f-57d3-8176-07fafbde6b1d","prev":null,"next":{"frontmatter":{"title":"RTMP","status":null},"fields":{"slug":"/posts/2020/rtmp/"}},"parent":"posts"}}}